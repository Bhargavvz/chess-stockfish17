{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adepu\\\\OneDrive\\\\Desktop\\\\stockfish\\\\chess-app\\\\src\\\\components\\\\ChessGame.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Chess } from 'chess.js';\nimport { Chessboard } from 'react-chessboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChessGame = ({\n  playerColor\n}) => {\n  _s();\n  const [game, setGame] = React.useState(new Chess());\n  const [stockfish, setStockfish] = React.useState(null);\n  const [isThinking, setIsThinking] = React.useState(false);\n\n  // Initialize Stockfish\n  React.useEffect(() => {\n    const worker = new Worker('/stockfish.js');\n    worker.onmessage = event => {\n      const message = event.data;\n      if (message.startsWith('bestmove')) {\n        const move = message.split(' ')[1];\n        makeMove(move);\n        setIsThinking(false);\n      }\n    };\n    setStockfish(worker);\n    worker.postMessage('uci');\n    worker.postMessage('isready');\n    return () => {\n      worker.terminate();\n    };\n  }, []);\n\n  // Make a move on the board\n  const makeMove = React.useCallback(move => {\n    try {\n      const result = game.move(move);\n      if (result) {\n        setGame(new Chess(game.fen()));\n        return true;\n      }\n    } catch (e) {\n      return false;\n    }\n    return false;\n  }, [game]);\n\n  // Handle player moves\n  const onDrop = (sourceSquare, targetSquare) => {\n    if (isThinking) return false;\n    if (game.turn() === 'w' && playerColor === 'black' || game.turn() === 'b' && playerColor === 'white') {\n      return false;\n    }\n    const move = makeMove({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q'\n    });\n    if (move) {\n      setIsThinking(true);\n      stockfish === null || stockfish === void 0 ? void 0 : stockfish.postMessage(`position fen ${game.fen()}`);\n      stockfish === null || stockfish === void 0 ? void 0 : stockfish.postMessage('go depth 15');\n    }\n    return move;\n  };\n\n  // Make AI move if it's AI's turn at the start\n  React.useEffect(() => {\n    if (game.turn() === 'w' && playerColor === 'black' || game.turn() === 'b' && playerColor === 'white') {\n      setIsThinking(true);\n      stockfish === null || stockfish === void 0 ? void 0 : stockfish.postMessage(`position fen ${game.fen()}`);\n      stockfish === null || stockfish === void 0 ? void 0 : stockfish.postMessage('go depth 15');\n    }\n  }, [playerColor, game]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chess-game\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-container\",\n      children: /*#__PURE__*/_jsxDEV(Chessboard, {\n        position: game.fen(),\n        onPieceDrop: onDrop,\n        boardOrientation: playerColor\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-info\",\n      children: [isThinking && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Stockfish is thinking...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Turn: \", game.turn() === 'w' ? 'White' : 'Black']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), game.isGameOver() && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Game Over:\", ' ', game.isCheckmate() ? 'Checkmate!' : game.isDraw() ? 'Draw!' : 'Game Over!']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(ChessGame, \"hmIFXWhnMtNYPm6f+9EUzNazHbU=\");\n_c = ChessGame;\nexport default ChessGame;\nvar _c;\n$RefreshReg$(_c, \"ChessGame\");","map":{"version":3,"names":["React","Chess","Chessboard","jsxDEV","_jsxDEV","ChessGame","playerColor","_s","game","setGame","useState","stockfish","setStockfish","isThinking","setIsThinking","useEffect","worker","Worker","onmessage","event","message","data","startsWith","move","split","makeMove","postMessage","terminate","useCallback","result","fen","e","onDrop","sourceSquare","targetSquare","turn","from","to","promotion","className","children","position","onPieceDrop","boardOrientation","fileName","_jsxFileName","lineNumber","columnNumber","isGameOver","isCheckmate","isDraw","_c","$RefreshReg$"],"sources":["C:/Users/adepu/OneDrive/Desktop/stockfish/chess-app/src/components/ChessGame.js"],"sourcesContent":["import React from 'react';\r\nimport { Chess } from 'chess.js';\r\nimport { Chessboard } from 'react-chessboard';\r\n\r\nconst ChessGame = ({ playerColor }) => {\r\n  const [game, setGame] = React.useState(new Chess());\r\n  const [stockfish, setStockfish] = React.useState(null);\r\n  const [isThinking, setIsThinking] = React.useState(false);\r\n\r\n  // Initialize Stockfish\r\n  React.useEffect(() => {\r\n    const worker = new Worker('/stockfish.js');\r\n    worker.onmessage = (event) => {\r\n      const message = event.data;\r\n      if (message.startsWith('bestmove')) {\r\n        const move = message.split(' ')[1];\r\n        makeMove(move);\r\n        setIsThinking(false);\r\n      }\r\n    };\r\n    setStockfish(worker);\r\n    worker.postMessage('uci');\r\n    worker.postMessage('isready');\r\n\r\n    return () => {\r\n      worker.terminate();\r\n    };\r\n  }, []);\r\n\r\n  // Make a move on the board\r\n  const makeMove = React.useCallback((move) => {\r\n    try {\r\n      const result = game.move(move);\r\n      if (result) {\r\n        setGame(new Chess(game.fen()));\r\n        return true;\r\n      }\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n    return false;\r\n  }, [game]);\r\n\r\n  // Handle player moves\r\n  const onDrop = (sourceSquare, targetSquare) => {\r\n    if (isThinking) return false;\r\n    \r\n    if ((game.turn() === 'w' && playerColor === 'black') ||\r\n        (game.turn() === 'b' && playerColor === 'white')) {\r\n      return false;\r\n    }\r\n\r\n    const move = makeMove({\r\n      from: sourceSquare,\r\n      to: targetSquare,\r\n      promotion: 'q',\r\n    });\r\n\r\n    if (move) {\r\n      setIsThinking(true);\r\n      stockfish?.postMessage(`position fen ${game.fen()}`);\r\n      stockfish?.postMessage('go depth 15');\r\n    }\r\n\r\n    return move;\r\n  };\r\n\r\n  // Make AI move if it's AI's turn at the start\r\n  React.useEffect(() => {\r\n    if ((game.turn() === 'w' && playerColor === 'black') ||\r\n        (game.turn() === 'b' && playerColor === 'white')) {\r\n      setIsThinking(true);\r\n      stockfish?.postMessage(`position fen ${game.fen()}`);\r\n      stockfish?.postMessage('go depth 15');\r\n    }\r\n  }, [playerColor, game]);\r\n\r\n  return (\r\n    <div className=\"chess-game\">\r\n      <div className=\"board-container\">\r\n        <Chessboard\r\n          position={game.fen()}\r\n          onPieceDrop={onDrop}\r\n          boardOrientation={playerColor}\r\n        />\r\n      </div>\r\n      <div className=\"game-info\">\r\n        {isThinking && <p>Stockfish is thinking...</p>}\r\n        <p>Turn: {game.turn() === 'w' ? 'White' : 'Black'}</p>\r\n        {game.isGameOver() && (\r\n          <p>\r\n            Game Over:{' '}\r\n            {game.isCheckmate()\r\n              ? 'Checkmate!'\r\n              : game.isDraw()\r\n              ? 'Draw!'\r\n              : 'Game Over!'}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChessGame; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}